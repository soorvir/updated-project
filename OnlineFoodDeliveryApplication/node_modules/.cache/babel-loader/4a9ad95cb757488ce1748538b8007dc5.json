{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\soorv\\\\Downloads\\\\FlightBookingSystem_frontend\\\\OnlineFoodDeliveryApplication\\\\src\\\\components\\\\FlightListAdmin.js\";\nimport React, { Component } from 'react';\nimport FlightServiceRest from '../services/FlightServiceRest';\nimport plane from '../assets/images/travel1.jpg';\nimport Header from './Header';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass FlightListAdmin extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getFlights = () => {\n      this.service.getFlights().then(data => {\n        console.log(data);\n        this.setState({\n          flights: data\n        });\n      });\n    };\n\n    this.onDelete = fid => {\n      if (window.confirm(\"Are you sure you want to delete the flight \" + fid + \" ?\")) {\n        this.service.deleteFlight(fid).then(response => {\n          this.getFlights();\n        });\n      }\n    };\n\n    this.onEdit = flight => {\n      localStorage.setItem('flight', JSON.stringify(flight));\n      console.log(\"flight to be updated : \", localStorage.getItem('flight'));\n      this.props.history.push('/updateFlight');\n    };\n\n    this.calculateDuration = f => {\n      let t1 = new Date('1970-01-01T' + f.departureTime + 'Z');\n      let t2 = new Date('1970-01-01T' + f.arrivalTime + 'Z');\n      let hour = t1.getUTCHours() - t2.getUTCHours();\n      let min = t1.getUTCMinutes() - t2.getUTCMinutes();\n\n      if (hour < 0) {\n        hour = 12 + hour;\n      }\n\n      if (min < 0) {\n        min = 60 + min;\n      }\n\n      return hour + 'hr ' + min + 'min';\n    };\n\n    this.service = new FlightServiceRest();\n    this.state = {};\n\n    if (!localStorage.getItem('user')) {\n      alert('Please Login');\n      this.props.history.push('/login');\n    } else {\n      if (JSON.parse(localStorage.getItem('user')).isadmin === 1) {} else {\n        alert('Access Denied');\n        this.props.history.push('/');\n      }\n    }\n  }\n\n  componentDidMount() {\n    this.getFlights();\n  }\n\n  render() {\n    if (!localStorage.getItem('user')) {\n      if (!this.state.flights) return null;\n    } else {\n      if (JSON.parse(localStorage.getItem('user')).isadmin === 1) if (!this.state.flights) return null;\n    }\n\n    const flightlist = this.state.flights.map(f => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card m-4 \",\n        style: {\n          width: 350,\n          height: \"fit-content\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-header\",\n          children: /*#__PURE__*/_jsxDEV(\"h5\", {\n            children: [\"Flight \", f.flightNumber]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col fw-bold\",\n              children: \"Source\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              children: f.source\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col fw-bold\",\n              children: \"Destination\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              children: f.destination\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col fw-bold\",\n              children: \"Travel Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              children: f.travelDate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col fw-bold\",\n              children: \"Takeoff Time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              children: f.arrivalTime\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col fw-bold\",\n              children: \"Landing Time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              children: f.departureTime\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col fw-bold\",\n              children: \"Duration\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              children: this.calculateDuration(f)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col fw-bold\",\n              children: \"Fare\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              children: f.price\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col fw-bold\",\n              children: \"Available Seats\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              children: f.availableSeats\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-dark mr-3\",\n            onClick: () => this.onDelete(f.flightNumber),\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-info\",\n            onClick: () => this.onEdit(f),\n            children: \"Edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this);\n    });\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundImage: `url(${plane})`,\n        overflow: 'hidden',\n        height: '20000px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pt-5\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pt-3\",\n          style: styling.wrapper,\n          children: flightlist\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nlet styling = {\n  wrapper: {\n    height: \"700px\",\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    justifyContent: \"center\"\n  }\n};\nexport default FlightListAdmin;","map":{"version":3,"sources":["C:/Users/soorv/Downloads/FlightBookingSystem_frontend/OnlineFoodDeliveryApplication/src/components/FlightListAdmin.js"],"names":["React","Component","FlightServiceRest","plane","Header","FlightListAdmin","constructor","props","getFlights","service","then","data","console","log","setState","flights","onDelete","fid","window","confirm","deleteFlight","response","onEdit","flight","localStorage","setItem","JSON","stringify","getItem","history","push","calculateDuration","f","t1","Date","departureTime","t2","arrivalTime","hour","getUTCHours","min","getUTCMinutes","state","alert","parse","isadmin","componentDidMount","render","flightlist","map","width","height","flightNumber","source","destination","travelDate","price","availableSeats","backgroundImage","overflow","styling","wrapper","display","flexWrap","justifyContent"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport FlightServiceRest from '../services/FlightServiceRest';\r\nimport plane from '../assets/images/travel1.jpg';\r\nimport Header from './Header';\r\n\r\nclass FlightListAdmin extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        this.service = new FlightServiceRest();\r\n                this.state = {\r\n                    }\r\n        if(!localStorage.getItem('user')){\r\n            alert('Please Login')\r\n            this.props.history.push('/login')\r\n            \r\n        }\r\n        else{\r\n            if(JSON.parse(localStorage.getItem('user')).isadmin === 1 ){\r\n                \r\n            }\r\n            else{\r\n                alert('Access Denied')\r\n                this.props.history.push('/')\r\n               \r\n            }\r\n        }\r\n    }\r\n       \r\n\r\n    componentDidMount() {\r\n        this.getFlights();\r\n    }\r\n\r\n    getFlights = () => {\r\n        this.service.getFlights().then(data => {\r\n            console.log(data);\r\n            this.setState({flights : data})\r\n        })\r\n    }\r\n\r\n    \r\n    onDelete = (fid) => {  \r\n\r\n        if(window.confirm(\"Are you sure you want to delete the flight \" + fid + \" ?\")) {\r\n            this.service.deleteFlight(fid).then(response => {\r\n                this.getFlights();\r\n            })\r\n        }\r\n    }\r\n\r\n    \r\n    onEdit = (flight) => {\r\n        localStorage.setItem('flight', JSON.stringify(flight));\r\n        console.log(\"flight to be updated : \",localStorage.getItem('flight'));\r\n        this.props.history.push('/updateFlight');\r\n    }\r\n\r\n    \r\n    calculateDuration = (f) => {\r\n        let t1 = new Date('1970-01-01T' + f.departureTime + 'Z')\r\n        let t2 = new Date('1970-01-01T' + f.arrivalTime + 'Z')\r\n        let hour = t1.getUTCHours() - t2.getUTCHours()\r\n        let min = t1.getUTCMinutes() - t2.getUTCMinutes()\r\n\r\n        if( hour < 0)\r\n        {\r\n            hour = 12+hour\r\n        }\r\n        if(min < 0){\r\n            min = 60+min\r\n        }\r\n\r\n        return (hour +'hr '+min + 'min')\r\n\r\n    }\r\n\r\n    render() {\r\n        if(!localStorage.getItem('user')){\r\n            if(!this.state.flights)\r\n                return null;\r\n        }\r\n        else{\r\n            if(JSON.parse(localStorage.getItem('user')).isadmin === 1  )\r\n                if(!this.state.flights)\r\n                    return null;\r\n        }\r\n        \r\n       \r\n\r\n        const flightlist = this.state.flights.map(f => {\r\n            return (\r\n                <div className=\"card m-4 \" style={{width: 350, height: \"fit-content\"}}>\r\n                    \r\n                        <div className=\"card-header\">\r\n                            <h5>Flight {f.flightNumber}</h5>\r\n                        </div>\r\n                        \r\n                        <div className=\"card-body\">\r\n                        <div className=\"row mb-2\">\r\n                            <div className=\"col fw-bold\">Source</div>\r\n                            <div className=\"col\">{f.source}</div>\r\n                        </div>\r\n                        <div className=\"row mb-2\">\r\n                            <div className=\"col fw-bold\">Destination</div>\r\n                            <div className=\"col\">{f.destination}</div>\r\n                        </div>\r\n                        <div className=\"row mb-2\">\r\n                            <div className=\"col fw-bold\">Travel Date</div>\r\n                            <div className=\"col\">{f.travelDate}</div>\r\n                        </div>  \r\n                        <div className=\"row mb-2\">\r\n                            <div className=\"col fw-bold\">Takeoff Time</div>\r\n                            <div className=\"col\">{f.arrivalTime}</div>\r\n                        </div>\r\n                        <div className=\"row mb-2\">\r\n                            <div className=\"col fw-bold\">Landing Time</div>\r\n                            <div className=\"col\">{f.departureTime}</div>\r\n                        </div>    \r\n                        <div className=\"row mb-2\">\r\n                            <div className=\"col fw-bold\">Duration</div>\r\n                            <div className=\"col\">{this.calculateDuration(f)}</div>\r\n                        </div>\r\n                        <div className=\"row mb-2\">\r\n                            <div className=\"col fw-bold\">Fare</div>\r\n                            <div className=\"col\">{f.price}</div>\r\n                        </div>  \r\n                        <div className=\"row mb-2\">\r\n                            <div className=\"col fw-bold\">Available Seats</div>\r\n                            <div className=\"col\">{f.availableSeats}</div>\r\n                        </div>  \r\n                        <br/>\r\n                            <button className=\"btn btn-dark mr-3\" onClick={() => this.onDelete(f.flightNumber)}>Delete</button>\r\n                            <button className=\"btn btn-info\" onClick={() => this.onEdit(f)}>Edit</button>\r\n                        </div>\r\n                        \r\n                    \r\n                </div>\r\n            )\r\n        });\r\n\r\n        return (\r\n            <div style={{backgroundImage: `url(${plane})`,overflow: 'hidden', height: '20000px'}}>\r\n                <Header/>\r\n                <div className=\"pt-5\">\r\n                <div className=\"pt-3\"  style={styling.wrapper}>\r\n                {flightlist}\r\n                </div>\r\n            </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nlet styling = { \r\n    wrapper : {\r\n        height: \"700px\",\r\n        display : \"flex\", \r\n        flexWrap: \"wrap\", \r\n        justifyContent: \"center\"\r\n    }\r\n}\r\n\r\nexport default FlightListAdmin;"]},"metadata":{},"sourceType":"module"}