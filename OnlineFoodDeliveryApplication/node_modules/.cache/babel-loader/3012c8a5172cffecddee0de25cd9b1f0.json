{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\soorv\\\\Downloads\\\\FlightBookingSystem_frontend\\\\OnlineFoodDeliveryApplication\\\\src\\\\components\\\\Ticket.js\";\nimport React, { Component } from 'react';\nimport '../assets/css/TicketStyle.css';\nimport ReactToPrint from 'react-to-print';\nimport planeBG from \"../assets/images/planebg1.jpg\";\nimport Footer from './Footer';\nimport Header from './Header';\nimport { send } from 'emailjs-com';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Ticket extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onSeats = () => {\n      this.props.history.push('/seats');\n    };\n\n    this.onMail = () => {\n      let msg = 'Your ticket is Confirmed with number : ' + this.ticket.ticketNumber;\n      let src = 'Source : ' + this.ticket.booking.flight.source;\n      let dst = 'Destination : ' + this.ticket.booking.flight.destination;\n      let travel_date = 'Travel Date : ' + this.ticket.booking.flight.travelDate;\n      let tosend = {\n        from_name: 'BookMyFlight',\n        to_name: JSON.parse(localStorage.getItem('user')).fname,\n        message: msg,\n        source: src,\n        destination: dst,\n        travelDate: travel_date,\n        reply_to: JSON.parse(localStorage.getItem('user')).email\n      };\n      send('service_enui0by', 'template_xkbuxqd', tosend, 'user_yzrYhjB6DwK4wPq69r043').then(response => {\n        console.log('SUCCESS!', response.status, response.text);\n        alert('Your ticket details has been emailed !!');\n      }).catch(err => {\n        console.log('FAILED...', err);\n      });\n    };\n\n    if (!localStorage.getItem('user')) {\n      this.props.history.push('/login');\n    } else {\n      if (localStorage.getItem('ticket') !== null) {\n        console.log('if');\n        console.log(localStorage.getItem('ticket'));\n        this.ticket = JSON.parse(localStorage.getItem('ticket'));\n        this.airplane = JSON.parse(localStorage.getItem('plane')); // localStorage.removeItem('ticket')\n      } else {\n        console.log('else');\n        this.ticket = JSON.parse(localStorage.getItem('view-ticket'));\n        localStorage.removeItem('view-ticket');\n      }\n\n      console.log(\"Ticket: \" + this.ticket);\n      this.passengers = this.ticket.booking.passengers;\n      console.log(\"TN: \" + this.ticket.ticketNumber);\n      console.log(\"Source: \" + this.ticket.booking.flight.source);\n      console.log(\"Dst: \" + this.ticket.booking.flight.destination);\n      console.log(\"AR Time: \" + this.ticket.booking.flight.arrivalTime);\n      console.log(\"DR Time: \" + this.ticket.booking.flight.departureTime);\n      console.log(\"Booking Date: \" + this.ticket.booking_date);\n      console.log(\"Total Pay: \" + this.ticket.total_pay);\n      console.log(\"Passengers: \" + JSON.stringify(this.passengers));\n    }\n  }\n\n  componentDidMount() {\n    if (!localStorage.getItem('user')) {\n      this.props.history.push('/login');\n    }\n  }\n\n  render() {\n    if (!this.ticket) {\n      return null;\n    }\n\n    this.psg_name = this.passengers.map(psg => {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [psg.pname, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 47\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 29\n      }, this);\n    });\n    this.psg_age = this.passengers.map(psg => {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [psg.age, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 44\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 29\n      }, this);\n    });\n    this.psg_gender = this.passengers.map(psg => {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [psg.gender, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 35\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }, this);\n    });\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"pt-3\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"py-5\",\n        style: {\n          backgroundImage: `url(${planeBG})`,\n          overflow: 'hidden',\n          height: '700px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'right',\n            marginRight: '90pt',\n            marginTop: '130pt'\n          },\n          children: /*#__PURE__*/_jsxDEV(ReactToPrint, {\n            trigger: () => /*#__PURE__*/_jsxDEV(\"a\", {\n              class: \"btn text-light bg-dark\",\n              role: \"button\",\n              href: \"#\",\n              children: \"Print The Ticket\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 32\n            }, this),\n            content: () => this.componentRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'right',\n            marginRight: '95pt',\n            marginTop: '15pt'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            class: \"btn text-light bg-dark\",\n            onClick: this.onMail,\n            children: \"Mail My Ticket\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"box pt-2\",\n          ref: el => this.componentRef = el,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"ticket\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              class: \"airline\",\n              children: \"Flight Booking System\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              class: \"boarding\",\n              children: [\"Boarding : \", this.ticket.booking.flight.source]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"content\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                class: \"jfk\",\n                children: this.ticket.booking.flight.source\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                class: \"plane\",\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  \"clip-rule\": \"evenodd\",\n                  \"fill-rule\": \"evenodd\",\n                  height: \"60\",\n                  width: \"60\",\n                  \"image-rendering\": \"optimizeQuality\",\n                  \"shape-rendering\": \"geometricPrecision\",\n                  \"text-rendering\": \"geometricPrecision\",\n                  viewBox: \"0 0 500 500\",\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  children: /*#__PURE__*/_jsxDEV(\"g\", {\n                    stroke: \"#222\",\n                    children: [/*#__PURE__*/_jsxDEV(\"line\", {\n                      fill: \"none\",\n                      \"stroke-linecap\": \"round\",\n                      \"stroke-width\": \"30\",\n                      x1: \"300\",\n                      x2: \"55\",\n                      y1: \"390\",\n                      y2: \"390\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 138,\n                      columnNumber: 286\n                    }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                      d: \"M98 325c-9 10 10 16 25 6l311-156c24-17 35-25 42-50 2-15-46-11-78-7-15 1-34 10-42 16l-56 35 1-1-169-31c-14-3-24-5-37-1-10 5-18 10-27 18l122 72c4 3 5 7 1 9l-44 27-75-15c-10-2-18-4-28 0-8 4-14 9-20 15l74 63z\",\n                      fill: \"#222\",\n                      \"stroke-linejoin\": \"round\",\n                      \"stroke-width\": \"10\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 138,\n                      columnNumber: 381\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 138,\n                    columnNumber: 269\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 138,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                class: \"sfo\",\n                children: this.ticket.booking.flight.destination\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"sub-content\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  class: \"watermark\",\n                  children: \"FlightBookingSystem\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 142,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  class: \"name\",\n                  children: [\"Passenger Name\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 143,\n                    columnNumber: 54\n                  }, this), this.psg_name]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 143,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  class: \"age\",\n                  children: [\"Passenger Age\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 147,\n                    columnNumber: 52\n                  }, this), this.psg_age]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 147,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  class: \"gender\",\n                  children: [\"Passenger Gender\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 151,\n                    columnNumber: 58\n                  }, this), this.psg_gender]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 151,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  class: \"flight\",\n                  children: [\"Flight No.\\xB0\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 155,\n                    columnNumber: 57\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: this.ticket.booking.flight.flightNumber\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 156,\n                    columnNumber: 21\n                  }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 156,\n                    columnNumber: 76\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 155,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  class: \"gate\",\n                  children: [\"Ticket No.\\xB0 \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 159,\n                    columnNumber: 56\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: this.ticket.ticketNumber\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 159,\n                    columnNumber: 62\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 159,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  class: \"amount\",\n                  children: [\"Amount Paid\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 161,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\"\\u20B9\", this.ticket.total_pay]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 162,\n                    columnNumber: 25\n                  }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 162,\n                    columnNumber: 63\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 161,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  class: \"boardingtime\",\n                  children: [\"Departure Time\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 165,\n                    columnNumber: 62\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: this.ticket.booking.flight.arrivalTime\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 165,\n                    columnNumber: 68\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  class: \"traveldate\",\n                  children: [\"Travel Date\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 166,\n                    columnNumber: 57\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: this.ticket.booking.flight.travelDate\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 166,\n                    columnNumber: 63\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  class: \"departuretime\",\n                  children: [\"Arrival Time\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 167,\n                    columnNumber: 61\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: this.ticket.booking.flight.departureTime\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 167,\n                    columnNumber: 67\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"barcode\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"script\", {\n            src: \"https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 8\n    }, this);\n  }\n\n}\n\nexport default Ticket;","map":{"version":3,"sources":["C:/Users/soorv/Downloads/FlightBookingSystem_frontend/OnlineFoodDeliveryApplication/src/components/Ticket.js"],"names":["React","Component","ReactToPrint","planeBG","Footer","Header","send","Ticket","constructor","props","onSeats","history","push","onMail","msg","ticket","ticketNumber","src","booking","flight","source","dst","destination","travel_date","travelDate","tosend","from_name","to_name","JSON","parse","localStorage","getItem","fname","message","reply_to","email","then","response","console","log","status","text","alert","catch","err","airplane","removeItem","passengers","arrivalTime","departureTime","booking_date","total_pay","stringify","componentDidMount","render","psg_name","map","psg","pname","psg_age","age","psg_gender","gender","backgroundImage","overflow","height","textAlign","marginRight","marginTop","componentRef","el","flightNumber"],"mappings":"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","sourcesContent":["\r\nimport React, { Component } from 'react';\r\nimport '../assets/css/TicketStyle.css'\r\nimport ReactToPrint from 'react-to-print'\r\nimport planeBG from \"../assets/images/planebg1.jpg\";\r\nimport Footer from './Footer';\r\nimport Header from './Header';\r\nimport { send } from 'emailjs-com';\r\n\r\nclass Ticket extends Component {\r\n    \r\n    constructor(props){\r\n        super(props)\r\n        if(!localStorage.getItem('user'))\r\n        {\r\n            this.props.history.push('/login')\r\n        }\r\n        else{\r\n        if(localStorage.getItem('ticket') !==null){\r\n            console.log('if')\r\n            console.log(localStorage.getItem('ticket'))\r\n            this.ticket=JSON.parse(localStorage.getItem('ticket'))\r\n            this.airplane = JSON.parse(localStorage.getItem('plane'))\r\n            // localStorage.removeItem('ticket')\r\n        }\r\n        else{\r\n            console.log('else')\r\n            this.ticket=JSON.parse(localStorage.getItem('view-ticket'))\r\n            localStorage.removeItem('view-ticket')\r\n        }\r\n        console.log(\"Ticket: \"+ this.ticket)\r\n        this.passengers = this.ticket.booking.passengers\r\n        console.log(\"TN: \"+ this.ticket.ticketNumber)\r\n        console.log(\"Source: \" + this.ticket.booking.flight.source)\r\n        console.log(\"Dst: \" + this.ticket.booking.flight.destination)\r\n        console.log(\"AR Time: \"+ this.ticket.booking.flight.arrivalTime)\r\n        console.log(\"DR Time: \"+ this.ticket.booking.flight.departureTime)\r\n        console.log(\"Booking Date: \"+ this.ticket.booking_date)\r\n        console.log(\"Total Pay: \"+ this.ticket.total_pay)\r\n        console.log(\"Passengers: \"+ JSON.stringify(this.passengers))\r\n    }\r\n        \r\n    }\r\n\r\n    componentDidMount(){\r\n        if(!localStorage.getItem('user'))\r\n        {\r\n            this.props.history.push('/login')\r\n        }\r\n       \r\n    }\r\n\r\n\r\n    onSeats = () =>{\r\n        this.props.history.push('/seats')\r\n    }\r\n\r\n    onMail = () => {\r\n\r\n        let msg = 'Your ticket is Confirmed with number : ' + this.ticket.ticketNumber;\r\n        let src = 'Source : ' + this.ticket.booking.flight.source;\r\n        let dst = 'Destination : ' + this.ticket.booking.flight.destination;\r\n        let travel_date = 'Travel Date : ' + this.ticket.booking.flight.travelDate;\r\n\r\n        let tosend = {\r\n                from_name: 'BookMyFlight',\r\n                to_name: JSON.parse(localStorage.getItem('user')).fname,\r\n                message: msg,\r\n                source : src,\r\n                destination : dst,\r\n                travelDate : travel_date,\r\n                reply_to: JSON.parse(localStorage.getItem('user')).email,\r\n                }\r\n        send(\r\n            'service_enui0by',\r\n            'template_xkbuxqd',\r\n            tosend,  \r\n            'user_yzrYhjB6DwK4wPq69r043'\r\n          )\r\n            .then((response) => {\r\n              console.log('SUCCESS!', response.status, response.text);\r\n              alert('Your ticket details has been emailed !!')\r\n            })\r\n            .catch((err) => {\r\n              console.log('FAILED...', err);\r\n            });\r\n    }\r\n\r\n\r\n    render() {\r\n        if(!this.ticket){\r\n            return null\r\n        }\r\n\r\n        this.psg_name = this.passengers.map(psg => {\r\n                        return(\r\n                            <span>{psg.pname} <br/></span> \r\n                            \r\n                            )    \r\n                        })\r\n\r\n        this.psg_age = this.passengers.map(psg => {\r\n                        return(\r\n                            <span>{psg.age}<br/></span> \r\n                            )    \r\n                        })\r\n\r\n        this.psg_gender = this.passengers.map(psg => {\r\n            return(\r\n                <span>{psg.gender}<br/></span> \r\n                )    \r\n            })\r\n        \r\n        \r\n    return (\r\n\r\n       <div class='pt-3'>\r\n        <Header />\r\n        <div class=\"py-5\" style={{backgroundImage: `url(${planeBG})`,overflow: 'hidden', height: '700px'}}>\r\n        \r\n            <div style={{textAlign:'right', marginRight:'90pt', marginTop:'130pt'}}>\r\n            <ReactToPrint \r\n                trigger={() => <a class=\"btn text-light bg-dark\" role=\"button\" href=\"#\">Print The Ticket</a>}\r\n                content={() => this.componentRef}\r\n            />\r\n            </div>\r\n\r\n            <div style={{textAlign:'right', marginRight:'95pt', marginTop:'15pt'}}>\r\n                <button class='btn text-light bg-dark' onClick={this.onMail}>Mail My Ticket</button>\r\n            </div>\r\n\r\n            <div class=\"box pt-2\" ref={el => (this.componentRef = el)}>\r\n            <div class=\"ticket\">\r\n                <span class=\"airline\">Flight Booking System</span>\r\n                <span class=\"boarding\">Boarding : {this.ticket.booking.flight.source}</span>\r\n                <div class=\"content\">\r\n                <span class=\"jfk\">{this.ticket.booking.flight.source}</span>\r\n                <span class=\"plane\"><svg clip-rule=\"evenodd\" fill-rule=\"evenodd\" height=\"60\" width=\"60\" image-rendering=\"optimizeQuality\" shape-rendering=\"geometricPrecision\" text-rendering=\"geometricPrecision\" viewBox=\"0 0 500 500\" xmlns=\"http://www.w3.org/2000/svg\"><g stroke=\"#222\"><line fill=\"none\" stroke-linecap=\"round\" stroke-width=\"30\" x1=\"300\" x2=\"55\" y1=\"390\" y2=\"390\"/><path d=\"M98 325c-9 10 10 16 25 6l311-156c24-17 35-25 42-50 2-15-46-11-78-7-15 1-34 10-42 16l-56 35 1-1-169-31c-14-3-24-5-37-1-10 5-18 10-27 18l122 72c4 3 5 7 1 9l-44 27-75-15c-10-2-18-4-28 0-8 4-14 9-20 15l74 63z\" fill=\"#222\" stroke-linejoin=\"round\" stroke-width=\"10\"/></g></svg></span>\r\n                <span class=\"sfo\">{this.ticket.booking.flight.destination}</span>\r\n                \r\n                <div class=\"sub-content\">\r\n                    <span class=\"watermark\">FlightBookingSystem</span>\r\n                    <span class=\"name\">Passenger Name<br />\r\n                    {this.psg_name}\r\n                    </span>\r\n\r\n                    <span class=\"age\">Passenger Age<br />\r\n                    {this.psg_age}\r\n                    </span>\r\n\r\n                    <span class=\"gender\">Passenger Gender<br />\r\n                    {this.psg_gender}\r\n                    </span>\r\n\r\n                    <span class=\"flight\">Flight No.&deg;<br />\r\n                    <span>{this.ticket.booking.flight.flightNumber}</span> <br />\r\n                    </span>\r\n\r\n                    <span class=\"gate\">Ticket No.&deg; <br /><span>{this.ticket.ticketNumber}</span></span>\r\n                    \r\n                    <span class=\"amount\">Amount Paid<br />\r\n                        <span>â‚¹{this.ticket.total_pay}</span> <br />\r\n                    </span>\r\n\r\n                    <span class=\"boardingtime\">Departure Time<br /><span>{this.ticket.booking.flight.arrivalTime}</span></span>\r\n                    <span class=\"traveldate\">Travel Date<br /><span>{this.ticket.booking.flight.travelDate}</span></span>\r\n                    <span class=\"departuretime\">Arrival Time<br /><span>{this.ticket.booking.flight.departureTime}</span></span>\r\n                \r\n                </div>\r\n                </div>\r\n                <div class=\"barcode\"></div>\r\n            </div>\r\n            \r\n                <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>\r\n            </div>\r\n            \r\n            </div>\r\n            <Footer />\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default Ticket;"]},"metadata":{},"sourceType":"module"}